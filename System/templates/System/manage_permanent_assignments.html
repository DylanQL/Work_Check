{% extends 'System/base.html' %}
{% load static %}
{% block title %}Hist贸rico de Evaluaciones Permanentes{% endblock %}
{% block content %}
    <h2>Hist贸rico de Evaluaciones Permanentes</h2>
    <table border="1" cellspacing="0" cellpadding="5">
        <thead>
            <tr>
                <th>ID</th>
                <th>Evaluator</th>
                <th>Employee</th>
                <th>Status</th>
                <th>Evaluation Cycle</th>
                <th>Summary</th>
                <th>Evaluation Details</th>
                <th>Fecha Creaci贸n</th>
            </tr>
        </thead>
        <tbody>
            {% for assign in assignments %}
                <tr>
                    <td>{{ assign.id }}</td>
                    <td>{{ assign.evaluator.first_name }} {{ assign.evaluator.last_name }}</td>
                    <td>{{ assign.employee.first_name }} {{ assign.employee.last_name }}</td>
                    <td>{{ assign.status }}</td>
                    <td>{{ assign.evaluation_cycle }}</td>
                    <!-- Columna para Summary: si existe, se muestra como enlace a detail_summary -->
                    <td>
                        {% if assign.summary %}
                            <a href="{% url 'detail_summary' assign.summary.id %}">{{ assign.summary.id }}</a>
                        {% else %}
                            -
                        {% endif %}
                    </td>
                    <!-- Columna para Evaluation Details: si Summary tiene evaluation_details, se muestra como enlace -->
                    <td>
                        {% if assign.summary and assign.summary.evaluation_details %}
                            <a href="{% url 'detail_evaluation_details' assign.summary.evaluation_details.id %}">{{ assign.summary.evaluation_details.id }}</a>
                        {% else %}
                            -
                        {% endif %}
                    </td>
                    <td>{{ assign.created_at }}</td>
                </tr>
            {% empty %}
                <tr>
                    <td colspan="8">No hay registros hist贸ricos.</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}
